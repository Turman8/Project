# AI助手项目上下文指南

## 🎯 项目核心信息

### 项目身份
- **项目名称**: ECG心电图分类器FPGA实现
- **项目类型**: AI硬件加速器 (软件→硬件迁移)
- **技术栈**: Python ML → C++ HLS → FPGA RTL → ARM软件
- **应用领域**: 医疗设备 - 实时心律监测

### 用户背景
- **FPGA经验**: 零基础，首次接触硬件开发
- **需求**: 需要详细解释每步含义和原理
- **学习风格**: 需要类比和比喻帮助理解
- **目标**: 完成完整的软硬件协同ECG分类系统

## 📊 技术架构详情

### 算法规格 (已验证)
```
输入数据: ECG信号 → 46维特征向量
├── 小波特征: 36维 (db4小波变换系数)
└── 时域特征: 10维 (统计特征)

神经网络: [46] → [128] → [64] → [32] → [6]
├── 激活函数: ReLU
├── 优化器: Adam
└── 损失函数: 交叉熵

输出分类: 6类心律模式
├── N: 正常心拍
├── L: 左束支阻滞  
├── R: 右束支阻滞
├── A: 房性早搏
├── V: 室性早搏
└── F: 融合心拍

性能指标:
├── 精度: 99.08% (MIT-BIH验证)
├── 数据集: 21,712个标注心拍
└── 频率: 136.99 MHz (FPGA实现)
```

### 硬件架构 (Zynq-7020)
```
ARM Cortex-A9 (PS端)
├── 运行Linux/裸机程序
├── 控制FPGA分类器
├── 处理ECG数据输入/输出
└── 用户界面交互

可编程逻辑 (PL端)  
├── ECG分类器IP核 (HLS生成)
├── AXI4-Lite控制接口
├── AXI4内存接口 (3个端口)
└── 高速并行计算

连接接口:
├── M_AXI_GP0: ARM→PL控制总线
├── S_AXI_HP0: PL→ARM数据总线  
└── 共享DDR内存: 512MB
```

## 🛠️ 开发工具链

### 软件工具
- **Vitis HLS 2024.1**: C++→RTL高层次综合
- **Vivado 2024.1**: FPGA系统集成与实现
- **Vitis IDE**: ARM软件开发环境
- **Python**: 原始算法开发与验证

### 文件类型说明
- `.cpp/.c`: C/C++源代码
- `.tcl`: Tool Command Language脚本
- `.bd`: Block Design文件
- `.xpr`: Vivado项目文件
- `.bit`: FPGA比特流文件
- `.xsa`: 硬件规格文件

## 📋 项目历史与现状

### 完成阶段
1. **Python原型** ✅
   - MIT-BIH数据集训练
   - 特征工程 (小波+时域)
   - 99.08%精度验证

2. **HLS转换** ✅  
   - C++重写算法
   - 定点数优化 (ap_fixed<16,8>)
   - IP核生成成功

3. **系统集成** 🔄 85%
   - Vivado项目创建 ✅
   - IP核集成 ✅
   - 控制接口连接 ✅
   - 数据接口连接 ❌ (时钟问题)

### 当前具体问题
**错误代码**: `S_AXI_HP0_ACLK` 时钟引脚未连接
**文件位置**: `deploy_ecg.tcl` 第65行
**解决方案**: 添加时钟连接语句
**修复代码**: `connect_bd_net [get_bd_pins processing_system7_0/FCLK_CLK0] [get_bd_pins processing_system7_0/S_AXI_HP0_ACLK]`

### 预期完成步骤
1. 修复时钟连接 (5分钟)
2. Vivado比特流生成 (30分钟)
3. Vitis软件应用创建 (60分钟)
4. 硬件测试验证 (30分钟)

## 🎓 关键概念解释

### FPGA开发类比
- **算法设计** = 建筑图纸设计
- **HLS综合** = 图纸转换为施工图
- **IP核** = 预制建筑模块
- **系统集成** = 模块组装连接
- **比特流** = 建筑使用说明书
- **软件应用** = 建筑管理系统

### AXI总线理解
- **AXI4-Lite**: 简单控制信号 (开关、状态)
- **AXI4**: 高速数据传输 (大量数据搬运)
- **互连(Interconnect)**: 数据交换枢纽
- **时钟域**: 确保数据同步传输

## 🤖 AI助手指导原则

### 沟通方式
- 使用类比和比喻解释技术概念
- 分步骤详细说明操作过程
- 预估时间和预期结果
- 提供具体的错误解决方案

### 技术支持重点
- 保持99.08%精度不变
- 确保软硬件接口正确
- 优先解决阻塞性问题
- 提供验证和测试方法

### 常见问题模式
- 时钟连接错误 (最常见)
- 地址空间分配问题
- IP核兼容性问题
- 软件驱动接口问题

---
*本文档帮助AI助手快速理解项目背景，提供精准的技术指导*
